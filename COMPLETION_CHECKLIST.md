# PCTGé¡¹ç›®å®Œæ•´è¡¥å…¨æ¸…å•

## ğŸ“Š å½“å‰çŠ¶æ€æ€»ç»“

### âœ… å·²å®Œæˆçš„æ ¸å¿ƒæ–‡ä»¶ï¼ˆ9ä¸ªï¼‰

1. **README.md** - å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£
2. **PROJECT_STRUCTURE.md** - é¡¹ç›®ç»“æ„è¯´æ˜
3. **requirements.txt** - Pythonä¾èµ–æ¸…å•
4. **setup.py** - å®‰è£…è„šæœ¬
5. **.gitignore** - Gitå¿½ç•¥æ–‡ä»¶
6. **config/training_config.py** - è®­ç»ƒé…ç½®
7. **config/dataset_config.py** - æ•°æ®é›†é…ç½®
8. **models/clip_wrapper.py** - CLIPå°è£…
9. **utils/metrics.py** - è¯„ä¼°æŒ‡æ ‡
10. **utils/visualization.py** - å¯è§†åŒ–å·¥å…·

### ğŸ”´ éœ€è¦è¡¥å…¨çš„å…³é”®æ–‡ä»¶ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

## ä¼˜å…ˆçº§ 1 - æ ¸å¿ƒæ¨¡å‹æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰

### 1. config/model_config.py
**åŠŸèƒ½**: æ¨¡å‹æ¶æ„é…ç½®
**å†…å®¹**:
- ModelConfigç±»ï¼ˆåŒ…å«å¯¹è¯ä¸­æåˆ°çš„æ‰€æœ‰é…ç½®ï¼‰
- SINeté…ç½®
- CLIPé…ç½®ï¼ˆpositive_prompts, negative_promptsï¼‰
- PCTGç”Ÿæˆå™¨é…ç½®
- ç‰©ç†çº¦æŸå‚æ•°

### 2. models/__init__.py
**åŠŸèƒ½**: æ¨¡å‹æ¨¡å—åˆå§‹åŒ–
**å†…å®¹**:
```python
from .pctg_generator import PCTGGenerator
from .sinet_detector import SINetDetector
from .clip_wrapper import CLIPWrapper
from .losses import CompositeLoss
from .dual_adversarial_loss import DualAdversarialLoss
```

### 3. models/pctg_generator.py
**åŠŸèƒ½**: PCTGç”Ÿæˆå™¨æ ¸å¿ƒï¼ˆå¯¹è¯ä¸­è¯¦ç»†è®²è§£çš„æ¨¡å‹ï¼‰
**å†…å®¹**:
- PCTGGeneratorç±»
- å¤šå°ºåº¦çº¹ç†ç¼–ç å™¨
- å¯¹æŠ—æ¡ä»¶åŒ–æ¨¡å—
- ç‰©ç†çº¦æŸå±‚
- 50Må‚æ•°ï¼Œæ¨ç†<50ms

### 4. models/sinet_detector.py
**åŠŸèƒ½**: SINetæ£€æµ‹å™¨å°è£…
**å†…å®¹**:
- SINetDetectorç±»
- åŠ è½½SINet_COD10K.pth
- æ˜¾è‘—æ€§æ£€æµ‹æ¥å£
- æ¢¯åº¦è®¡ç®—æ”¯æŒ

### 5. models/losses.py
**åŠŸèƒ½**: ç»¼åˆæŸå¤±å‡½æ•°
**å†…å®¹**:
- CompositeLossç±»
- å¯¹æŠ—æŸå¤±ï¼ˆSINet + CLIPï¼‰
- æ„ŸçŸ¥æŸå¤±ï¼ˆVGGï¼‰
- ç‰©ç†çº¦æŸæŸå¤±
- æ­£åˆ™åŒ–æŸå¤±

### 6. models/dual_adversarial_loss.py
**åŠŸèƒ½**: äººçœ¼+AIåŒé‡å¯¹æŠ—æŸå¤±ï¼ˆå¯¹è¯ä¸­è¯¦ç»†è®²è§£ï¼‰
**å†…å®¹**:
- DualAdversarialLossç±»
- è½®å»“æŠ‘åˆ¶æŸå¤±
- äººçœ¼æ˜¾è‘—æ€§æŸå¤±
- é¢œè‰²ä¼ªè£…æŸå¤±
- çº¹ç†è¿ç»­æ€§æŸå¤±

## ä¼˜å…ˆçº§ 2 - è®­ç»ƒç›¸å…³æ–‡ä»¶ï¼ˆé‡è¦ï¼‰

### 7. training/__init__.py
**åŠŸèƒ½**: è®­ç»ƒæ¨¡å—åˆå§‹åŒ–

### 8. training/trainer.py
**åŠŸèƒ½**: å®Œæ•´è®­ç»ƒæµç¨‹ï¼ˆå¯¹è¯ä¸­æåˆ°çš„æ ¸å¿ƒè®­ç»ƒå™¨ï¼‰
**å†…å®¹**:
- Trainerç±»
- è®­ç»ƒå¾ªç¯
- éªŒè¯å¾ªç¯
- æ¨¡å‹ä¿å­˜/åŠ è½½
- æŸå¤±è®¡ç®—å’Œåå‘ä¼ æ’­
- æŒ‡æ ‡è®°å½•

### 9. training/validator.py
**åŠŸèƒ½**: éªŒè¯å™¨
**å†…å®¹**:
- Validatorç±»
- éªŒè¯é›†è¯„ä¼°
- æ”»å‡»æˆåŠŸç‡è®¡ç®—

### 10. training/optimizer.py
**åŠŸèƒ½**: ä¼˜åŒ–å™¨é…ç½®
**å†…å®¹**:
- åˆ›å»ºä¼˜åŒ–å™¨ï¼ˆAdamWç­‰ï¼‰
- å­¦ä¹ ç‡è°ƒåº¦å™¨
- æ¢¯åº¦è£å‰ª

## ä¼˜å…ˆçº§ 3 - æ•°æ®å¤„ç†æ–‡ä»¶ï¼ˆé‡è¦ï¼‰

### 11. data/__init__.py
**åŠŸèƒ½**: æ•°æ®æ¨¡å—åˆå§‹åŒ–

### 12. data/dataset.py
**åŠŸèƒ½**: æ•°æ®é›†åŠ è½½ï¼ˆå¯¹è¯ä¸­æåˆ°çš„dataset.pyï¼‰
**å†…å®¹**:
- CamouflageDatasetç±»
- å›¾åƒ+æ©ç +èƒŒæ™¯åŠ è½½
- æ•°æ®é¢„å¤„ç†

### 13. data/transforms.py
**åŠŸèƒ½**: æ•°æ®å¢å¼º
**å†…å®¹**:
- éšæœºç¿»è½¬ã€æ—‹è½¬
- é¢œè‰²æŠ–åŠ¨
- éšæœºè£å‰ª

### 14. data/dataloader.py
**åŠŸèƒ½**: æ•°æ®åŠ è½½å™¨é…ç½®
**å†…å®¹**:
- åˆ›å»ºDataLoader
- å¤šçº¿ç¨‹åŠ è½½
- æ‰¹å¤„ç†

## ä¼˜å…ˆçº§ 4 - è„šæœ¬æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰

### 15. scripts/train.py
**åŠŸèƒ½**: ä¸»è®­ç»ƒè„šæœ¬ï¼ˆå¯¹è¯ä¸­çš„train.pyï¼‰
**å†…å®¹**:
- å‘½ä»¤è¡Œå‚æ•°è§£æ
- é…ç½®åŠ è½½
- è®­ç»ƒæµç¨‹å¯åŠ¨
- æ”¯æŒdebugã€paperã€dual_adversarialæ¨¡å¼

### 16. scripts/test.py
**åŠŸèƒ½**: æµ‹è¯•è„šæœ¬
**å†…å®¹**:
- æ¨¡å‹è¯„ä¼°
- æŒ‡æ ‡è®¡ç®—
- ç»“æœå¯è§†åŒ–

### 17. scripts/setup_models.sh
**åŠŸèƒ½**: æ¨¡å‹è‡ªåŠ¨è®¾ç½®ï¼ˆå¯¹è¯ä¸­æåˆ°ï¼‰
**å†…å®¹**:
- æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
- åˆ›å»ºç›®å½•ç»“æ„
- ä¸‹è½½ç¼ºå¤±æ¨¡å‹

### 18. scripts/verify_models.py
**åŠŸèƒ½**: éªŒè¯æ¨¡å‹ï¼ˆå¯¹è¯ä¸­æåˆ°ï¼‰
**å†…å®¹**:
- æ£€æŸ¥æ‰€æœ‰æ¨¡å‹æ˜¯å¦å­˜åœ¨
- éªŒè¯æ¨¡å‹å¯åŠ è½½æ€§
- è¾“å‡ºæ¨¡å‹ä¿¡æ¯

### 19. scripts/download_models.py
**åŠŸèƒ½**: æ¨¡å‹ä¸‹è½½è„šæœ¬
**å†…å®¹**:
- è‡ªåŠ¨ä¸‹è½½EfficientNetã€VGGç­‰
- è¿›åº¦æ¡æ˜¾ç¤º

## ä¼˜å…ˆçº§ 5 - å·¥å…·å’Œè¾…åŠ©æ–‡ä»¶

### 20. utils/__init__.py
**åŠŸèƒ½**: å·¥å…·æ¨¡å—åˆå§‹åŒ–

### 21. utils/image_processing.py
**åŠŸèƒ½**: å›¾åƒå¤„ç†å·¥å…·
**å†…å®¹**:
- å›¾åƒå½’ä¸€åŒ–
- æ©ç å¤„ç†
- çº¹ç†åˆæˆ

### 22. utils/logger.py
**åŠŸèƒ½**: æ—¥å¿—ç³»ç»Ÿ
**å†…å®¹**:
- è®­ç»ƒæ—¥å¿—
- è¯„ä¼°æ—¥å¿—
- Tensorboardé›†æˆ

### 23. config/__init__.py
**åŠŸèƒ½**: é…ç½®æ¨¡å—åˆå§‹åŒ–

## ä¼˜å…ˆçº§ 6 - æ¨ç†å’Œæ¼”ç¤º

### 24. inference/__init__.py
**åŠŸèƒ½**: æ¨ç†æ¨¡å—åˆå§‹åŒ–

### 25. inference/predictor.py
**åŠŸèƒ½**: é¢„æµ‹å™¨
**å†…å®¹**:
- åŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹
- å•å¼ å›¾åƒæ¨ç†
- æ‰¹é‡æ¨ç†

### 26. inference/demo.py
**åŠŸèƒ½**: æ¼”ç¤ºè„šæœ¬
**å†…å®¹**:
- äº¤äº’å¼æ¼”ç¤º
- å¯è§†åŒ–å¯¹æ¯”

## ä¼˜å…ˆçº§ 7 - æµ‹è¯•æ–‡ä»¶

### 27. tests/__init__.py
**åŠŸèƒ½**: æµ‹è¯•æ¨¡å—åˆå§‹åŒ–

### 28. tests/test_models.py
**åŠŸèƒ½**: æ¨¡å‹å•å…ƒæµ‹è¯•
**å†…å®¹**:
- æµ‹è¯•PCTGç”Ÿæˆå™¨
- æµ‹è¯•SINetæ£€æµ‹å™¨
- æµ‹è¯•CLIPå°è£…

### 29. tests/test_losses.py
**åŠŸèƒ½**: æŸå¤±å‡½æ•°æµ‹è¯•

### 30. tests/test_dataset.py
**åŠŸèƒ½**: æ•°æ®é›†æµ‹è¯•

## ä¼˜å…ˆçº§ 8 - æ–‡æ¡£æ–‡ä»¶

### 31. docs/INSTALLATION.md
**åŠŸèƒ½**: è¯¦ç»†å®‰è£…æŒ‡å—

### 32. docs/TRAINING.md
**åŠŸèƒ½**: è¯¦ç»†è®­ç»ƒæŒ‡å—

### 33. docs/MODEL_REQUIREMENTS.md
**åŠŸèƒ½**: æ¨¡å‹éœ€æ±‚æ–‡æ¡£ï¼ˆå¯¹è¯ä¸­æåˆ°ï¼‰

### 34. docs/CLIP_PROMPTS_GUIDE.md
**åŠŸèƒ½**: CLIPæç¤ºè¯è¯¦ç»†æŒ‡å—ï¼ˆå¯¹è¯ä¸­é‡ç‚¹è®²è§£ï¼‰

### 35. docs/API.md
**åŠŸèƒ½**: APIæ–‡æ¡£

## ğŸ“ å®ç°å»ºè®®

### ç¬¬ä¸€æ­¥ï¼šè¡¥å…¨æ ¸å¿ƒæ¨¡å‹ï¼ˆä¼˜å…ˆçº§1ï¼‰
è¿™äº›æ˜¯é¡¹ç›®çš„æ ¸å¿ƒï¼Œå¿…é¡»é¦–å…ˆå®ç°ï¼š
1. model_config.py - åŒ…å«å¯¹è¯ä¸­è¯¦ç»†è®¨è®ºçš„æ‰€æœ‰é…ç½®
2. pctg_generator.py - 50Må‚æ•°çš„ç”Ÿæˆå™¨
3. sinet_detector.py - SINetå°è£…
4. losses.py - ç»¼åˆæŸå¤±
5. dual_adversarial_loss.py - åŒé‡å¯¹æŠ—æŸå¤±

### ç¬¬äºŒæ­¥ï¼šè¡¥å…¨è®­ç»ƒæµç¨‹ï¼ˆä¼˜å…ˆçº§2ï¼‰
å®ç°å®Œæ•´çš„è®­ç»ƒpipelineï¼š
1. trainer.py - æ ¸å¿ƒè®­ç»ƒå™¨
2. optimizer.py - ä¼˜åŒ–å™¨é…ç½®

### ç¬¬ä¸‰æ­¥ï¼šè¡¥å…¨æ•°æ®å¤„ç†ï¼ˆä¼˜å…ˆçº§3ï¼‰
æ”¯æŒæ•°æ®åŠ è½½å’Œå¢å¼ºï¼š
1. dataset.py - æ•°æ®é›†ç±»
2. transforms.py - æ•°æ®å¢å¼º
3. dataloader.py - æ•°æ®åŠ è½½å™¨

### ç¬¬å››æ­¥ï¼šè¡¥å…¨è„šæœ¬ï¼ˆä¼˜å…ˆçº§4ï¼‰
ä½¿é¡¹ç›®å¯ä»¥è¿è¡Œï¼š
1. train.py - ä¸»è®­ç»ƒè„šæœ¬
2. test.py - æµ‹è¯•è„šæœ¬
3. setup_models.sh - æ¨¡å‹è®¾ç½®
4. verify_models.py - æ¨¡å‹éªŒè¯

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å¯¹åº”å…³ç³»

æ ¹æ®å¯¹è¯å†…å®¹ï¼Œä»¥ä¸‹æ˜¯å…³é”®åŠŸèƒ½åˆ°æ–‡ä»¶çš„æ˜ å°„ï¼š

### 1. "ç”Ÿæˆè¿·å½©å›¾åƒçš„æ ¸å¿ƒ"
**æ–‡ä»¶**: models/pctg_generator.py
**å…³é”®ç‚¹**:
- è¾“å…¥: åŸå§‹å›¾åƒ + æ©ç  + èƒŒæ™¯
- è¾“å‡º: å¯¹æŠ—æ€§è¿·å½©çº¹ç†
- ç»“æ„: ç¼–ç å™¨ + å¯¹æŠ—æ¨¡å— + è§£ç å™¨

### 2. "CLIPæç¤ºè¯é…ç½®"
**æ–‡ä»¶**: config/model_config.py
**å…³é”®ç‚¹**:
- positive_prompts: è¦é™ä½ç›¸ä¼¼åº¦çš„æç¤ºè¯
- negative_prompts: è¦æé«˜ç›¸ä¼¼åº¦çš„æç¤ºè¯
- çŒ«çš„ä¾‹å­: ["a cat", "a kitten"] vs ["background", "floor"]

### 3. "äººçœ¼+AIåŒé‡å¯¹æŠ—"
**æ–‡ä»¶**: models/dual_adversarial_loss.py
**å…³é”®ç‚¹**:
- è½®å»“æŠ‘åˆ¶: ç ´åè¾¹ç¼˜
- é¢œè‰²ä¼ªè£…: ä¸èƒŒæ™¯èåˆ
- çº¹ç†è¿ç»­: å¹³æ»‘è¿‡æ¸¡

### 4. "è®­ç»ƒæµç¨‹"
**æ–‡ä»¶**: training/trainer.py
**å…³é”®ç‚¹**:
- å‰å‘ä¼ æ’­ â†’ è®¡ç®—æŸå¤± â†’ åå‘ä¼ æ’­
- SINetæ£€æµ‹ â†’ CLIPåŒ¹é… â†’ ç»¼åˆæŸå¤±
- éªŒè¯ â†’ ä¿å­˜æœ€ä½³æ¨¡å‹

## ğŸš€ å¿«é€Ÿå¯åŠ¨è·¯çº¿å›¾

è¦è®©é¡¹ç›®å¯ä»¥è¿è¡Œï¼Œæœ€å°å¿…é¡»æ–‡ä»¶é›†ï¼ˆ10ä¸ªï¼‰ï¼š

1. âœ… config/model_config.py
2. âœ… models/pctg_generator.py
3. âœ… models/sinet_detector.py
4. âœ… models/losses.py
5. âœ… data/dataset.py
6. âœ… training/trainer.py
7. âœ… scripts/train.py
8. âœ… scripts/verify_models.py
9. config/__init__.py
10. models/__init__.py

æœ‰äº†è¿™10ä¸ªæ–‡ä»¶ï¼Œå°±å¯ä»¥è¿è¡ŒåŸºç¡€è®­ç»ƒæµç¨‹ã€‚

## ğŸ“¦ å»ºè®®çš„è¡¥å…¨é¡ºåº

### é˜¶æ®µ1ï¼šæœ€å°å¯è¿è¡Œç‰ˆæœ¬ï¼ˆ1-2å¤©ï¼‰
åˆ›å»ºä¼˜å…ˆçº§1-4çš„æ–‡ä»¶ï¼Œå®ç°åŸºç¡€è®­ç»ƒ

### é˜¶æ®µ2ï¼šå®Œæ•´åŠŸèƒ½ç‰ˆæœ¬ï¼ˆ3-5å¤©ï¼‰
æ·»åŠ ä¼˜å…ˆçº§5-6çš„æ–‡ä»¶ï¼Œå®ç°æ¨ç†å’Œæ¼”ç¤º

### é˜¶æ®µ3ï¼šç”Ÿäº§å°±ç»ªç‰ˆæœ¬ï¼ˆ1å‘¨ï¼‰
è¡¥å……ä¼˜å…ˆçº§7-8çš„æ–‡ä»¶ï¼Œæ·»åŠ æµ‹è¯•å’Œæ–‡æ¡£

## ğŸ’¡ é‡è¦æç¤º

æ ¹æ®å¯¹è¯å†…å®¹ï¼Œä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶æœ€å…³é”®ï¼š

1. **pctg_generator.py** - è¿™æ˜¯ç”Ÿæˆè¿·å½©çš„æ ¸å¿ƒï¼Œå¯¹è¯ä¸­è¯¦ç»†è§£é‡Šäº†å…¶å·¥ä½œåŸç†
2. **model_config.py** - åŒ…å«CLIPæç¤ºè¯é…ç½®ï¼Œå¯¹è¯ä¸­é‡ç‚¹è®¨è®º
3. **dual_adversarial_loss.py** - äººçœ¼+AIåŒé‡å¯¹æŠ—ï¼Œå¯¹è¯ä¸­ç‰¹åˆ«å¼ºè°ƒ
4. **trainer.py** - å®Œæ•´è®­ç»ƒæµç¨‹ï¼Œå¯¹è¯ä¸­æåˆ°çš„train.pyä¾èµ–å®ƒ

## ğŸ” æ£€æŸ¥æ¸…å•

åœ¨è®¤ä¸ºé¡¹ç›®"å®Œæ•´"ä¹‹å‰ï¼Œæ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

- [ ] æ‰€æœ‰configæ–‡ä»¶éƒ½æœ‰å¯¹åº”çš„Pythonç±»
- [ ] æ‰€æœ‰modelsæ–‡ä»¶éƒ½èƒ½ç‹¬ç«‹importå’Œæµ‹è¯•
- [ ] è®­ç»ƒè„šæœ¬å¯ä»¥æˆåŠŸè¿è¡Œï¼ˆè‡³å°‘åœ¨debugæ¨¡å¼ï¼‰
- [ ] æ•°æ®é›†å¯ä»¥æ­£å¸¸åŠ è½½
- [ ] æ¨¡å‹éªŒè¯è„šæœ¬é€šè¿‡
- [ ] READMEä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½å¯ä»¥æ‰§è¡Œ
- [ ] è‡³å°‘æœ‰ä¸€ä¸ªå®Œæ•´çš„è®­ç»ƒâ†’è¯„ä¼°â†’å¯è§†åŒ–æµç¨‹

## ğŸ“§ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

å»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºè¡¥å…¨ï¼š

1. **ç«‹å³è¡¥å…¨**ï¼ˆä»Šå¤©ï¼‰:
   - config/model_config.py
   - models/__init__.py
   - models/pctg_generator.py
   - models/sinet_detector.py

2. **ä¼˜å…ˆè¡¥å…¨**ï¼ˆæ˜å¤©ï¼‰:
   - models/losses.py
   - training/trainer.py
   - data/dataset.py
   - scripts/train.py

3. **æŒç»­è¡¥å…¨**ï¼ˆæœ¬å‘¨ï¼‰:
   - å…¶ä½™ä¼˜å…ˆçº§2-4çš„æ–‡ä»¶

4. **åç»­å®Œå–„**ï¼ˆä¸‹å‘¨ï¼‰:
   - ä¼˜å…ˆçº§5-8çš„æ–‡ä»¶
